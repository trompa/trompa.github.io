<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Installing microk8s in Fedora</title>
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/custom.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
    <div class="layout">
        <aside class="sidebar">
            <div class="site-name">
                <h1><a href="/">Alberto Lago</a></h1>
            </div>

            <nav class="nav-links">
                <h2><a href="/about">About</a></h2>
                <!--a href="/tags">Tags</a-->
            </nav>

            <div class="tag-list">
                <h2>Tags</h2>
                <ul class="post-tags">
                    
                    
                    
                    
                    <li><a href="/tag/automation">automation</a></li>
                    
                    
                    
                    
                    <li><a href="/tag/fedora">fedora</a></li>
                    
                    
                    
                    
                    <li><a href="/tag/microk8s">microk8s</a></li>
                    
                    
                </ul>
            </div>

            <div class="social-links">
                <h3>Connect</h3>
                <ul>
                    <li><a href="https://github.com/trompa" target="_blank"><i class="fab fa-github"></i> GitHub</a>
                    </li>
                    <li><a href="https://linkedin.com/in/albertolago" target="_blank"><i class="fab fa-linkedin"></i>
                            LinkedIn</a></li>
                </ul>
            </div>
        </aside>

        <main class="content">
            
<article class="post">
  <header>
    <h1>Installing microk8s in Fedora</h1>
    <p class="post-meta">November 8, 2025</p>
    
      <ul class="post-tags">
        
          <li><a href="/tag/microk8s">microk8s</a></li>
        
          <li><a href="/tag/fedora">fedora</a></li>
        
          <li><a href="/tag/automation">automation</a></li>
        
      </ul>
    
  </header>

  <section class="post-body">
    <p>Kubernetes has become the de facto standard for container orchestration, enabling developers and operators to manage complex applications at scale. For those looking to experiment or run lightweight clusters locally, MicroK8s offers a streamlined Kubernetes experience. MicroK8s is a minimal, single-package Kubernetes distribution maintained by Canonical, designed to be easy to install and use.</p>

<p>MicroK8s is distributed via Snap, a universal package manager that provides self-contained software packages. Snap packages include all their dependencies, siming to make them work consistently across different Linux distributions. While this approach ensures compatibility, installing MicroK8s on Fedora requires a few specific steps.</p>

<p>In this post, I’ll walk through the process I followed to successfully install and run MicroK8s on Fedora, highlighting the challenges and solutions along the way.<br />
If you already have MicroK8s installed and are experiencing DNS issues, you can skip directly to <a href="#fixing-dns">Fixing DNS</a> section.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Before proceeding with the installation, ensure your system meets these requirements:</p>
<ul>
  <li>Fedora 35 or later</li>
  <li>At least 4GB of RAM</li>
  <li>At least 20GB of available disk space</li>
  <li>Admin (sudo) privileges</li>
</ul>

<h2 id="installing-snap">Installing Snap</h2>

<p>First, we need to install Snap on Fedora [<a href="#references">1</a>]. The Snap daemon (snapd) is available in the official Fedora repositories:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install snapd package</span>
<span class="nb">sudo </span>dnf <span class="nb">install </span>snapd

<span class="c"># Create symbolic link for snap</span>
<span class="nb">sudo ln</span> <span class="nt">-s</span> /var/lib/snapd/snap /snap
</code></pre></div></div>

<p>After installing Snap, it’s recommended to1 restart your system to ensure all paths and services are properly initialized:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>reboot
</code></pre></div></div>

<h2 id="installing-microk8s">Installing MicroK8s</h2>

<p>With Snap installed, we can now install MicroK8s [<a href="#references">2</a>]:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install MicroK8s using snap</span>
<span class="nb">sudo </span>snap <span class="nb">install </span>microk8s <span class="nt">--classic</span>

<span class="c"># Add your user to the microk8s group</span>
<span class="nb">sudo </span>usermod <span class="nt">-a</span> <span class="nt">-G</span> microk8s <span class="nv">$USER</span>

<span class="c"># Create .kube directory</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> ~/.kube

<span class="c"># Change ownership of the .kube directory</span>
<span class="nb">sudo chown</span> <span class="nt">-R</span> <span class="nv">$USER</span> ~/.kube

<span class="c"># Create symbolic link for kubectl configuration</span>
<span class="nb">sudo </span>microk8s config <span class="o">&gt;</span> ~/.kube/config
</code></pre></div></div>

<p>You’ll need to log out and log back in for the group changes to take effect. After logging back in, verify and manage MicroK8s:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check the current status</span>
microk8s status

<span class="c"># Start MicroK8s</span>
microk8s start

<span class="c"># Wait for MicroK8s to be ready</span>
microk8s status <span class="nt">--wait-ready</span>

<span class="c"># Stop MicroK8s if needed</span>
microk8s stop
</code></pre></div></div>

<p>By default, MicroK8s runs with strict confinement. To use it effectively, you can enable some common addons:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Enable common addons</span>
microk8s <span class="nb">enable </span>dns
microk8s <span class="nb">enable </span>hostpath-storage
</code></pre></div></div>

<p>Important: MicroK8s remembers its last state when your system reboots. If MicroK8s was running when you shut down your system, it will automatically start on the next boot. Conversely, if it was stopped before shutdown, it will remain stopped after reboot.</p>

<p>To ensure MicroK8s always starts on boot, verify its status and start it if needed before shutting down your system:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check current status and start if needed</span>
microk8s status <span class="o">&amp;&amp;</span> microk8s start
</code></pre></div></div>

<p>All good till here, it seems straight forward. We can start using it right away.
Lets use kubectl to look at our cluster:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias </span><span class="nv">kubectl</span><span class="o">=</span><span class="s1">'microk8s kubectl'</span>
microk8s kubectl get all <span class="nt">--all-namespaces</span>
</code></pre></div></div>

<h3 id="fixing-dns">Fixing DNS</h3>

<h4 id="todo-fill">TODO: FILL</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>firewall-cmd <span class="nt">--add-masquerade</span> <span class="nt">--permanent</span>
firewall-cmd <span class="nt">--reload</span>
</code></pre></div></div>

<h2 id="kubernetes-dashboard">Kubernetes Dashboard</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vim /var/snap/microk8s/common/addons/core/addons/dashboard/enable
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$HELM</span> upgrade <span class="nt">--install</span> kubernetes-dashboard kubernetes-dashboard <span class="se">\</span>
  <span class="nt">--repo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">REPO</span><span class="k">}</span><span class="s2">"</span> <span class="nt">--version</span> <span class="s2">"</span><span class="k">${</span><span class="nv">VERSION</span><span class="k">}</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">--create-namespace</span> <span class="nt">--namespace</span> <span class="s2">"kubernetes-dashboard"</span> <span class="se">\</span>
  <span class="nt">--set</span> kong.env.dns_order<span class="o">=</span><span class="s2">"LAST</span><span class="se">\,</span><span class="s2">A</span><span class="se">\,</span><span class="s2">CNAME</span><span class="se">\,</span><span class="s2">SRV"</span> <span class="se">\</span>
  <span class="nt">--set</span> kong.env.ADMIN_LISTEN<span class="o">=</span><span class="s2">"0.0.0.0:8444 http2 ssl"</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl create token default
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl port-forward <span class="nt">-n</span> kubernetes-dashboard service/kubernetes-dashboard-kong-proxy 10443:443
</code></pre></div></div>

<h2 id="references">References</h2>

<ol>
  <li><a href="https://snapcraft.io/docs/installing-snap-on-fedora">Installing Snap on Fedora</a></li>
  <li><a href="https://microk8s.io/docs/getting-started">Getting Started with MicroK8s</a></li>
</ol>

  </section>

  <nav class="post-nav">
    
    
  </nav>

<script src="https://giscus.app/client.js"
        data-repo="trompa/trompa.github.io"
        data-repo-id="R_kgDOQQuf1g"
        data-category="Blog Comments"
        data-category-id="DIC_kwDOQQuf1s4Cxg_9"
        data-mapping="pathname"
        data-strict="1"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="noborder_dark"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</article>
        </main>
    </div>
</body>

</html>